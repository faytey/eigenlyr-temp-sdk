{"version":3,"file":"unfetch.js","sources":["../src/index.mjs"],"sourcesContent":["export default function (url, options) {\n\toptions = options || {};\n\treturn new Promise((resolve, reject) => {\n\t\tconst request = new XMLHttpRequest();\n\t\tconst keys = [];\n\t\tconst headers = {};\n\n\t\tconst response = () => ({\n\t\t\tok: ((request.status / 100) | 0) == 2, // 200-299\n\t\t\tstatusText: request.statusText,\n\t\t\tstatus: request.status,\n\t\t\turl: request.responseURL,\n\t\t\ttext: () => Promise.resolve(request.responseText),\n\t\t\tjson: () => Promise.resolve(request.responseText).then(JSON.parse),\n\t\t\tblob: () => Promise.resolve(new Blob([request.response])),\n\t\t\tclone: response,\n\t\t\theaders: {\n\t\t\t\tkeys: () => keys,\n\t\t\t\tentries: () => keys.map((n) => [n, request.getResponseHeader(n)]),\n\t\t\t\tget: (n) => request.getResponseHeader(n),\n\t\t\t\thas: (n) => request.getResponseHeader(n) != null,\n\t\t\t},\n\t\t});\n\n\t\trequest.open(options.method || \"get\", url, true);\n\n\t\trequest.onload = () => {\n\t\t\trequest\n\t\t\t\t.getAllResponseHeaders()\n\t\t\t\t.toLowerCase()\n\t\t\t\t.replace(/^(.+?):/gm, (m, key) => {\n\t\t\t\t\theaders[key] || keys.push((headers[key] = key));\n\t\t\t\t});\n\t\t\tresolve(response());\n\t\t};\n\n\t\trequest.onerror = reject;\n\n\t\trequest.withCredentials = options.credentials == \"include\";\n\n\t\tfor (const i in options.headers) {\n\t\t\trequest.setRequestHeader(i, options.headers[i]);\n\t\t}\n\n\t\trequest.send(options.body || null);\n\t});\n}\n"],"names":["url","options","Promise","resolve","reject","request","XMLHttpRequest","keys","headers","response","ok","status","statusText","responseURL","text","responseText","json","then","JSON","parse","blob","Blob","clone","entries","map","n","getResponseHeader","get","has","i","open","method","onload","getAllResponseHeaders","toLowerCase","replace","m","key","push","onerror","withCredentials","credentials","setRequestHeader","send","body"],"mappings":"eAAyBA,SAAAA,EAAKC,GAE7B,OADAA,EAAUA,GAAW,OACHC,QAAC,SAACC,EAASC,GAC5B,IAAaC,EAAG,IAAIC,eACdC,EAAO,GACPC,EAAU,CAAE,EAEZC,EAAW,SAAXA,IAAkB,MAAA,CACvBC,GAAoC,IAA9BL,EAAQM,OAAS,IAAO,GAC9BC,WAAYP,EAAQO,WACpBD,OAAQN,EAAQM,OAChBX,IAAKK,EAAQQ,YACbC,KAAM,WAAA,eAAcX,QAAQE,EAAQU,aAAa,EACjDC,KAAM,WAAMd,OAAAA,QAAQC,QAAQE,EAAQU,cAAcE,KAAKC,KAAKC,MAAM,EAClEC,KAAM,kBAAalB,QAACC,QAAQ,IAAIkB,KAAK,CAAChB,EAAQI,WAAW,EACzDa,MAAOb,EACPD,QAAS,CACRD,KAAM,WAAMA,OAAAA,CAAI,EAChBgB,QAAS,WAAMhB,OAAAA,EAAKiB,IAAI,SAACC,GAAM,MAAA,CAACA,EAAGpB,EAAQqB,kBAAkBD,GAAG,EAAC,EACjEE,IAAK,SAACF,GAAMpB,OAAAA,EAAQqB,kBAAkBD,EAAE,EACxCG,IAAK,SAACH,GAAC,OAAqC,QAAxBC,kBAAkBD,EAAU,GAEjD,EAkBD,IAAK,IAAMI,KAhBXxB,EAAQyB,KAAK7B,EAAQ8B,QAAU,MAAO/B,GAAK,GAE3CK,EAAQ2B,OAAS,WAChB3B,EACE4B,wBACAC,cACAC,QAAQ,YAAa,SAACC,EAAGC,GACzB7B,EAAQ6B,IAAQ9B,EAAK+B,KAAM9B,EAAQ6B,GAAOA,EAC3C,GACDlC,EAAQM,IACT,EAEAJ,EAAQkC,QAAUnC,EAElBC,EAAQmC,gBAAyC,WAAvBvC,EAAQwC,YAEXxC,EAACO,QACvBH,EAAQqC,iBAAiBb,EAAG5B,EAAQO,QAAQqB,IAG7CxB,EAAQsC,KAAK1C,EAAQ2C,MAAQ,KAC9B,EACD"}